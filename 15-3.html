<!DOCTYPE html>
<html lang="zh-TW">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="./public/favicon.ico" />
    <meta http-equiv="cache-control" content="no-cache" />
    <title>JavaScript-syntax-testing</title>
    <link rel="stylesheet" href=" https://necolas.github.io/normalize.css/8.0.1/normalize.css" />
    <link rel="stylesheet" href="./hightlight/default.min.css" />
    <link rel="stylesheet" href="./css/main.css" />
    <link rel="stylesheet" href="./css/copybutton.css" />
    <link rel="stylesheet" href="./css/hightlight.css" />
    <script src="./hightlight/hightlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js"></script>
  </head>

  <body>
    <header>
      <nav>
        <h1>
          <span id="toggle-menu"></span>
          <a href="index.html">現代 Javascript 實務應用</a>
        </h1>
      </nav>
    </header>
    <main>
      <aside>
        <nav></nav>
      </aside>
      <article>
        <h2 id="15-3">15-3 AggregateError</h2>
        <p>有一個情境是當我們想要捕獲多個錯誤訊息時</p>
        <p>
          <code>AggregateError</code>
          是從父類 Error 中繼承實例方法。
          <code>AggregateError</code>
          物件代表了包裝了多個錯誤物件的單個 Error 物件。當一個操作需要報告多個錯誤時，例如
          <code>Promise.any()</code>
          ，當傳遞給它的所有
          <code>Promise</code>
          都被拒絕時，就會擲出該錯誤。
          <code>AggregateError</code>
          是
          <code>Error</code>
          的子類。
        </p>
        <h3>實例屬性</h3>
        <p>
          <em>
            從父類
            <code>Error</code>
            中繼承實例屬性。
          </em>
        </p>
        <p>
          以下屬性在
          <code>AggregateError.prototype</code>
          上定義，並由所有
          <code>AggregateError</code>
          實例共享。
        </p>
        <dl>
          <dt><code>AggregateError.prototype.constructor</code></dt>
          <dd>
            <p>
              創建實例物件的構造函數。對於
              <code>AggregateError</code>
              實例來說，初始值為
              <code>AggregateError</code>
              構造函數。
            </p>
          </dd>
          <dt><code>AggregateError.prototype.name</code></dt>
          <dd>
            <p>
              代表了錯誤類型的名稱，對於
              <code>AggregateError.prototype.name</code>
              來說，初始值為
              <code>"AggregateError"</code>
              。
            </p>
          </dd>
        </dl>
        <p>
          這些屬性是每個
          <code>AggregateError</code>
          實例的自有屬性。
        </p>
        <dl>
          <dt><code>errors</code></dt>
          <dd>
            <p>
              一個陣列，基本上反映了
              <code>AggregateError</code>
              實例化時使用的迭代器；例如，如果
              <code>AggregateError</code>
              是用
              <code>AggregateError()</code>
              構造函數創建的，則作為第一個參數傳遞給構造函數的任何迭代器生成的陣列。
            </p>
          </dd>
        </dl>
        <pre><code class="language-js">
Promise.any([Promise.reject(new Error("some error"))]).catch((e) =&gt; {
  console.log(e instanceof AggregateError); // true
  console.log(e instanceof Error); // true
  console.log(e.message); // "All Promises rejected"
  console.log(e.name); // "AggregateError"
  console.log(e.errors); // [ Error: "some error" ]
});
        </code></pre>
        <h3>創建一個 AggregateError</h3>
        <pre><code class="language-js">
try {
  throw new AggregateError([new Error("some error")], "Hello");
} catch (e) {
  console.log(e instanceof AggregateError); // true
  console.log(e instanceof Error); // true
  console.log(e.message); // "Hello"
  console.log(e.name); // "AggregateError"
  console.log(e.errors); // [ Error: "some error" ]
}
        </code></pre>
        <p>資料來源:</p>
        <p>
          <a
            href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AggregateError"
          >
            https://developer.mozilla.org/.../AggregateError
          </a>
        </p>
      </article>
    </main>
  </body>
  <script type="module" src="./js/main.js"></script>
</html>
